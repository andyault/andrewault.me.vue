'use strict';BG.col={fg:'#333',acc:'#FFB8F1',bg:{hue:0,sat:0,val:97}};var scene={tileSize:48,speed:-1/500,size:3/4,height:64,time:0,lastTime:0};BG.init=function(canvas){this.onResize(canvas)};BG.onResize=function(canvas){canvas.width=canvas.offsetWidth;canvas.height=canvas.offsetHeight};BG.think=function(canvas,paused){var now=Date.now();if(!paused)scene.time+=now-scene.lastTime;scene.lastTime=now;return true};BG.draw=function(ctx){var w=ctx.canvas.width;var h=ctx.canvas.height;var ts=scene.tileSize;var ts2=scene.tileSize/2;var ts4=scene.tileSize/4;var th=scene.tileSize*7/8;var numCols=Math.ceil(w/ts/2)*2;var numRows=Math.ceil(h/th/2)*2;var nx=Math.ceil((w-numCols*ts)/2);var ny=Math.ceil((h-numRows*th)/2);for(var j=-2;j<numRows+1;j++){var y=ny+j*th;for(var i=0;i<numCols+1;i++){var x=nx+i*ts;if(j%2!=numRows/2%2)x+=ts2;var d=Math.floor(Math.sqrt(Math.pow(x/ts-w/ts/2,2)+Math.pow(y/th-h/th/2,2))+0.5);var z=Math.cos(scene.time*scene.speed+d*scene.size)*scene.height;z*=1.1-d/numCols*2;ctx.beginPath();ctx.fillStyle='hsl('+d/numCols*2*360+', 60%, 60%)';ctx.moveTo(x-ts2,y+z);ctx.lineTo(x,y-ts4+z);ctx.lineTo(x+ts2,y+z);ctx.lineTo(x,y+ts4+z);ctx.fill();ctx.beginPath();ctx.fillStyle='#aaa';ctx.moveTo(x-ts2,y+z);ctx.lineTo(x,y+ts4+z);ctx.lineTo(x,h);ctx.lineTo(x-ts2,h);ctx.fill();ctx.beginPath();ctx.fillStyle='#ccc';ctx.moveTo(x,y+ts4+z);ctx.lineTo(x+ts2,y+z);ctx.lineTo(x+ts2,h);ctx.lineTo(x,h);ctx.fill()}}};